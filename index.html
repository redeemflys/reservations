<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Canjea tu vale · Vuelos</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Firebase (NO ES6 módulos) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>
<body>
  <!-- TOP BAR -->
  <header class="topbar">
    <div class="wrap bar">
      <span class="brand"><span class="logo"></span> REDEEMFLYS</span>
      <span class="spacer"></span>
      <a class="link" href="#" aria-disabled="true">Ayuda</a>
    </div>

    <div class="wrap tabs">
      <span class="tab active" aria-current="page">✈️ Selección de vuelo</span>
    </div>

    <!-- BARRA DE CANJEO -->
    <div class="wrap search">
      <form id="flightForm" class="searchbar">
        <label class="pill">
          <span class="pill-head">Origen</span>
          <select id="origen" required></select>
        </label>
        <label class="pill">
          <span class="pill-head">Destino</span>
          <select id="destino" required></select>
        </label>
        <label class="pill">
          <span class="pill-head">Ida</span>
          <input id="fechaSalida" type="date" required />
        </label>
        <label class="pill">
          <span class="pill-head">Regreso</span>
          <input id="fechaRegreso" type="date" />
        </label>
        <label class="pill xs">
          <span class="pill-head">Personas</span>
          <select id="pasajeros" required>
            <option value="1">1</option><option value="2">2</option>
            <option value="3">3</option><option value="4">4</option>
            <option value="5+">5+</option>
          </select>
        </label>
        <label class="pill xs">
          <span class="pill-head">Clase</span>
          <select id="clase">
            <option value="Turista">Turista</option>
            <option value="Premium">Premium</option>
            <option value="Business">Business</option>
          </select>
        </label>
        <button id="submitBtn" class="btn cta" type="submit">Canjear</button>
      </form>

      <label class="consent">
        <input id="consent" type="checkbox" required />
        Acepto que se guarden mis datos de seleccion para gestionar la resreva.
      </label>
      <p id="status" class="status" aria-live="polite"></p>
    </div>
  </header>

  <main class="wrap body">
    <div class="notice info">
      <strong> NOTA:</strong> Para canjear su vale, seleccione las opciones correspondientes. Una vez confirmado, recibirá un correo electrónico con sus vuelos en un plazo de 7 días hábiles. La selección se hará efectiva tras 48h. Tras lo cual no se permitirá la modificación de la reserva.
    </div>

    <section class="promo">
      <h2>🎉¡Canjea tu vale de vuelo!🎉</h2>
      <p>Fechas sujetas a disponibilidad.</p>
    </section>

    <section class="columns">

      <article class="card">
        <h3>Destinos frecuentes</h3>
        <div class="chips">
          <button class="chip" data-city="Londres">Londres</button>
          <button class="chip" data-city="Roma">Roma</button>
          <button class="chip" data-city="París">París</button>
          <button class="chip" data-city="Zúrich">Zúrich</button>
          <button class="chip" data-city="Berlín">Berlín</button>
        </div>
      </article>
    </section>
  </main>

  <footer class="footer">
    <div class="wrap">
      <small>© 2025 Canjea tu vale. Términos · Privacidad.</small>
    </div>
  </footer>

  <!-- Modal AGRADECIMIENTO -->
  <dialog id="thanksModal" class="modal">
    <div class="modal-head">
      <h2>¡Enhorabuena!</h2>
      <button class="btn ghost" id="closeThanks">Cerrar</button>
    </div>
    <div class="modal-body">
      <p>Su selección se ha realizado correctamente. Recibirá los vuelos en su correo próximamente.</p>
      <div id="summary" class="summary"></div>
      <button class="btn cta block" id="okThanks">Entendido</button>
    </div>
  </dialog>

  <!-- Modal INICIAL (email gateway) -->
  <dialog id="gateModal" class="modal">
    <div class="modal-head">
      <h2>Bienvenido/a</h2>
    </div>
    <div class="modal-body">
      <p>Introduce tu correo para continuar con el canje del vale.</p>
      <form id="gateForm" class="gateform">
        <label class="field">
          <span>Correo electrónico</span>
          <input id="gateEmail" type="email" placeholder="ejemplo@gmail.com" required />
        </label>
        <button class="btn cta block" type="submit" id="gateConfirm">Confirmar</button>
        <p id="gateError" class="status" role="alert"></p>
      </form>
    </div>
  </dialog>

  <!-- Config Firebase -->
  <script>
    window.firebaseConfig = {
      apiKey: "AIzaSyCGcI9PFKZhnAN404yslQO2zurKOFLvoRw",
      authDomain: "idiomas-3f0a3.firebaseapp.com",
      databaseURL: "https://idiomas-3f0a3-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "idiomas-3f0a3",
      storageBucket: "idiomas-3f0a3.firebasestorage.app",
      messagingSenderId: "1080268564792",
      appId: "1:1080268564792:web:da0c2cef7a0bdc364d39cd"
    };
  </script>
  <script src="app.js"></script>
</body>
</html>
